#Trade Monitor

Trade Monitor is an application to monitor stock updates

## Content

- [The Application](#the-application)
  - [Features](#features)
  - [Running the app](#running-the-app)
  - [Running Unit Tests](#running-unit-tests)
  - [Folder Structure](#running-unit-tests)
- [Socket Reference](#socket-reference)
- [Future Improvements](#future-improvements)

---

## The Application

With Stock Monitor application user can subscribe or unsubscribe for any stock updates and receive real-time stock updates.

### Features

- **Subscribe**: User can subscribe for a stock by entering the ISIN in the given field and click on 'Subscribe' button.
- **Unsubscribe**: Once user subscribe for a stock, the application will display real-time stock updates until user choose to unsubscribe by clicking the 'Unsubscribe' button.
- **Web Socket Status**: User can also see the status of web socket ie the backend which sends the updates for any stocks subscribed.
- **Validations**: Below validations are done when user subscribe for a stock:

  1.  User cannot submit an empty entry.
  2.  Stock ISIN entered is in valid format
  3.  If stock subscribed is already in the subscrption list.

- **Highlight the stock when user search the same again**: Added this additional feature to inform the user when the subscribed stock is entered again. The stock entry in the list is highlighted.

---

### Running the app

Once you have the folder and are ready to start, you can run `yarn` (or `npm install`) to install dependencies. After that, you can run:

```bash
# npm
npm run dev

# or yarn
yarn dev
```

This will start the application in development mode. It will also start the WebSocket server on port 8425.

You can see the client application running in your browser by going to http://localhost:3001.

---

### Running Unit Tests

You can run below commands to run unit tests.
These tests are written using Jest and React Testing Library

```bash
# npm
npm run test
npm run test:watch

# or yarn
yarn test
yarn test:watch
```

You can also get test coverage by running below command:

```bash
npm run test:coverage
```

Once the test results are generated, you can find reports in the 'coverage' folder that generated .

--

### Folder Structure

Apart from the basic folders generated by next.js we have below files and folders under 'src' folder:

- **app**: contains all the pages and UI components used in the application
  Any component folders under app folder contains the typescript file for component and scss file for styling the component.
  Each component folders contains a '**tests**' folder with unit tests specific to that component
- **lib**: contains store for application state management. The subfolder 'features' contains the specific features related files for managing states.
- **utils**: contains the files with different utilities used in the application code, i.e form validation utility.
- **constants**: constants used across the application code.

---

## Socket Reference

The WebSocket server is started when you run `yarn dev`. You can then connect to it at

```URL
ws://localhost:8425/
```

To subcribe to a specific security

```JSON
{
    "subscribe": "${ISIN}"
}
```

To unsubscribe to a specific security

```JSON
{
    "unsubscribe": "${ISIN}"
}
```

#### Example Request

To subscribe to the BASF instrument you would use

```JSON
{
    "subscribe": "DE000BASF111"
}
```

#### Sample Response

You would then receive a WebSocket stream with messages in the following format

```JSON
{
    "isin": "DE000BASF111",
    "price": 11.316359370403822,
    "bid": 11.306359370403822,
    "ask": 11.326359370403821
}
```

---

## Future Improvements

- Application can be scaled for multiple users
- Visualisation for analtsis of stocks for different time periods
